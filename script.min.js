window.addEventListener("load",()=>{document.body.classList.add("loaded")});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("img").forEach(e=>{try{e.loading="lazy",e.decoding="async"}catch(e){}});const e=document.getElementById("bg-music"),t=document.getElementById("music-toggle"),n=()=>{e.play().catch(e=>console.log("Autoplay blocked:",e)),document.removeEventListener("click",n),document.removeEventListener("keydown",n)};document.addEventListener("click",n),document.addEventListener("keydown",n),t.addEventListener("click",(()=>{e.paused?(e.play(),t.textContent="üîä",t.classList.remove("paused")):(e.pause(),t.textContent="üîá",t.classList.add("paused"))}))});document.querySelectorAll(".navbar a").forEach(e=>{e.addEventListener("click",t=>{if(e.getAttribute("href").startsWith("#")){t.preventDefault();const n=e.getAttribute("href").substring(1),o=document.getElementById(n);if(o){const e=window.innerWidth<768?-100:-60,t=o.getBoundingClientRect().top+window.pageYOffset+e;window.scrollTo({top:t,behavior:"smooth"})}}window.innerWidth<768&&(menu.style.display="none")})});const menuToggle=document.getElementById("menu-toggle"),menu=document.getElementById("menu");menuToggle.addEventListener("click",(()=>{menu.style.display="flex"===menu.style.display?"none":"flex"})),document.querySelectorAll(".navbar a").forEach(e=>{e.addEventListener("click",(()=>{window.innerWidth<768&&(menu.style.display="none")}))}),document.querySelectorAll(".carousel").forEach(e=>{const t=e.querySelector(".carousel-track"),n=e.querySelector(".prev"),o=e.querySelector(".next");let a=e.querySelectorAll(".carousel-slide");const s=a[0].cloneNode(!0),i=a[a.length-1].cloneNode(!0);s.id="first-clone",i.id="last-clone",t.appendChild(s),t.insertBefore(i,t.firstChild),a=e.querySelectorAll(".carousel-slide");let d=1,l=null,r=t.children[d].clientWidth;function c(){d>=t.children.length-1||(d++,t.style.transition="transform 0.5s ease-in-out",t.style.transform=`translateX(-${r*d}px)`)}function u(){d<=0||(d--,t.style.transition="transform 0.5s ease-in-out",t.style.transform=`translateX(-${r*d}px)`)}t.style.transform=`translateX(-${r*d}px)`,t.addEventListener("transitionend",(()=>{const e=t.children;"first-clone"===e[d].id&&(t.style.transition="none",d=1,t.style.transform=`translateX(-${r*d}px)`),"last-clone"===e[d].id&&(t.style.transition="none",d=e.length-2,t.style.transform=`translateX(-${r*d}px)`)})),o&&o.addEventListener("click",(()=>{c(),m()})),n&&n.addEventListener("click",(()=>{u(),m()}));function m(){!function(){null!==l&&(clearInterval(l),l=null)}(),function(){null===l&&(l=setInterval((()=>{c()}),4e3))}()}m(),window.addEventListener("resize",(()=>{r=t.children[d].clientWidth,t.style.transition="none",t.style.transform=`translateX(-${r*d}px)`})),e.addEventListener("mouseenter",(()=>{null!==l&&(clearInterval(l),l=null)})),e.addEventListener("mouseleave",(()=>{m()}));let g=!1,f=0,h=!1;const p=50;e.addEventListener("pointerdown",(e=>{"mouse"!==e.pointerType||0===e.button&&(g=!0,f=e.clientX,h=!1,null!==l&&(clearInterval(l),l=null),(()=>{try{e.target.setPointerCapture(e.pointerId)}catch(e){}})())})),e.addEventListener("pointermove",(e=>{if(!g)return;Math.abs(e.clientX-f)>10&&(h=!0)})),e.addEventListener("pointerup",(e=>{if(!g)return;g=!1;const t=e.clientX-e.clientX+f;try{e.target.releasePointerCapture(e.pointerId)}catch(e){}h&&Math.abs(t)>p?(t>0?u():c(),m()):m()})),e.addEventListener("pointercancel",(()=>{g=!1,m()})),e.addEventListener("touchstart",(t=>{if(window.PointerEvent)return;f=t.touches[0].clientX,h=!1,null!==l&&(clearInterval(l),l=null)}),{passive:!0}),e.addEventListener("touchmove",(e=>{if(window.PointerEvent)return;Math.abs(e.touches[0].clientX-f)>10&&(h=!0)}),{passive:!0}),e.addEventListener("touchend",(e=>{if(window.PointerEvent)return;const t=e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].clientX:f,n=t-f;Math.abs(n)>p?(n>0?u():c(),m()):m()}))});const textarea=document.getElementById("message");textarea.addEventListener("input",(()=>{textarea.style.height="auto",textarea.style.height=textarea.scrollHeight+"px"}));const form=document.getElementById("wishForm");function showCustomAlert(e){let t=document.getElementById("custom-alert");t||(t=document.createElement("div"),t.id="custom-alert",document.body.appendChild(t)),t.textContent=e,t.style.display="block",setTimeout((()=>t.classList.add("show")),10),setTimeout((()=>{t.classList.remove("show"),setTimeout((()=>t.style.display="none"),600)}),2500)}form.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData(form),n=new URLSearchParams(t);fetch("https://script.google.com/macros/s/AKfycbxDjEUxBc__2-NMb8LtgkoxFSygC5_R8wV2CR1flsIaebKvhGA3Vm782UvzQGJXwdTlpQ/exec",{method:"POST",body:n}).then((e=>e.json())).then((e=>{"success"===e.result&&(showCustomAlert("Thank you for your wish! üíñ"),form.reset())})).catch((e=>showCustomAlert("Error sending message ‚ùå")))}));
